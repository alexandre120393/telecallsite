<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <script>
        function is_cpf(c) {

            if ((c = c.replace(/[^\d]/g, "")).length != 11)
                return false
           
                //SIM, é um cornojob fudido, mas foi a única forma q eu achei de resolver e ir certinho com a máscara
            if (c == "00000000000")
                return false;
            
            if (c == "11111111111")
                return false;
            
            if (c == "22222222222")
                return false;

            if (c == "33333333333")
                return false;
            
            if (c == "44444444444")
                return false;

            if (c == "55555555555")
                return false;
            
            if (c == "66666666666")
                return false;
            
            if (c == "77777777777")
                return false;
            
            if (c == "88888888888")
                return false;

            if (c == "99999999999")
                return false;

            var r;
            var s = 0;

            for (i = 1; i <= 9; i++)
                s = s + parseInt(c[i - 1]) * (11 - i);

            r = (s * 10) % 11;

            if ((r == 10) || (r == 11))
                r = 0;

            if (r != parseInt(c[9]))
                return false;

            s = 0;

            for (i = 1; i <= 10; i++)
                s = s + parseInt(c[i - 1]) * (12 - i);

            r = (s * 10) % 11;

            if ((r == 10) || (r == 11))
                r = 0;

            if (r != parseInt(c[10]))
                return false;

            return true;
        }


        function fMasc(objeto, mascara) {
            obj = objeto
            masc = mascara
            setTimeout("fMascEx()", 1)
        }

        function fMascEx() {
            obj.value = masc(obj.value)
        }

        function mCPF(cpf) {
            cpf = cpf.replace(/\D/g, "")
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2")
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2")
            cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2")
            return cpf
        }

        cpfCheck = function (el) {
            document.getElementById('cpfResponse').innerHTML = is_cpf(el.value) ? '<span style="color:green">válido</span>' : '<span style="color:red">inválido</span>';
            if (el.value == '') document.getElementById('cpfResponse').innerHTML = '';
        }
        </script>
    
      
</head>

<body>

    <p>Digite o CPF:</p>
    <p><input id="cpf" type="text" onkeyup="cpfCheck(this)" maxlength="18" onkeydown="javascript: fMasc( this, mCPF );">
        <span id="cpfResponse"></span>
    </p>
</body>

</html>
